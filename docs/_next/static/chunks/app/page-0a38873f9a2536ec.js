(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6636:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var s=n(5155),l=n(2115);let a=e=>{let{items:t,OnPlayClicked:n,OnAddToListClicked:a}=e,[r,c]=(0,l.useState)([]),[i,o]=(0,l.useState)(null),d="",u=0;t.map(e=>d=e.rss),t.map(e=>u=e.count);let m=d;(0,l.useEffect)(()=>{(async()=>{try{let a=await fetch(m);if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.text(),i=new DOMParser().parseFromString(r,"application/xml").getElementsByTagName("item"),o=[],d=i.length<=u?i.length:u;for(let a=0;a<d;a++){var e,t,n,s,l;let r=(null==(e=i[a].getElementsByTagName("title")[0])?void 0:e.textContent)||"",c=(null==(t=i[a].getElementsByTagName("link")[0])?void 0:t.textContent)||"",d=(null==(n=i[a].getElementsByTagName("pubDate")[0])?void 0:n.textContent)||"",u=(null==(s=i[a].getElementsByTagName("itunes:duration")[0])?void 0:s.textContent)||"",m=(null==(l=i[a].getElementsByTagName("enclosure")[0])?void 0:l.getAttribute("url"))||"";o.push({title:r,link:c,pubDate:d,duration:u,mp3:m})}c(o)}catch(e){console.error("Error fetching RSS feed:",e),o("Error fetching RSS feed")}})()},[]);let h=e=>{console.log("[podcast01.tsx] onPlayClicked, mp3_url = ",e),null==n||n(e)},p=e=>{let t={title:e.title,mp3_url:(null==e?void 0:e.mp3)||""};null==a||a(t)};return(0,s.jsxs)("div",{children:[t.map((e,t)=>(0,s.jsx)("h2",{children:e.channel_title},t)),i&&(0,s.jsx)("p",{style:{color:"red"},children:i}),(0,s.jsx)("ul",{children:r.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:e.title}),(0,s.jsxs)("p",{children:[e.pubDate," | 길이: ",e.duration,"\xa0 | ",(0,s.jsx)("span",{onClick:()=>h((null==e?void 0:e.mp3)||""),className:"btn_span",children:"듣기"}),"\xa0 | ",(0,s.jsx)("span",{onClick:()=>p(e),className:"btn_span",children:"추가"})]})]},t))})]})},r=e=>{let{mp3_url:t,onPlayEndedEvent:n}=e,a=(0,l.useRef)(null),[r,c]=(0,l.useState)(!1),[i,o]=(0,l.useState)(0),[d,u]=(0,l.useState)(0);(0,l.useEffect)(()=>(console.log(t),a.current&&(a.current.addEventListener("loadedmetadata",()=>{var e,t;u((null==(e=a.current)?void 0:e.duration)||0),console.log("loadedmetadata"),null==(t=a.current)||t.play(),c(!r)}),a.current.addEventListener("timeupdate",()=>{var e,t;o(null!=(t=null==(e=a.current)?void 0:e.currentTime)?t:0)}),a.current.addEventListener("ended",()=>{c(!1),o(0),console.log("ended"),null==n||n()})),()=>{a.current&&(a.current.removeEventListener("loadedmetadata",()=>{}),a.current.removeEventListener("timeupdate",()=>{}),a.current.removeEventListener("ended",()=>{}))}),[t]);let m=e=>{let t=Math.floor(e/3600).toString().padStart(2,"0"),n=Math.floor(e/60).toString().padStart(2,"0"),s=Math.floor(e%60).toString().padStart(2,"0");return 1<=e/3600?"".concat(t,":").concat(n,":").concat(s):"".concat(n,":").concat(s)};return(0,s.jsxs)("div",{className:"player",style:{width:"99%"},children:[(0,s.jsx)("audio",{ref:a,src:t,autoPlay:!1}),(0,s.jsx)("button",{onClick:()=>{a.current&&(r?a.current.pause():a.current.play(),c(!r))},children:r?"Pause":"Play"}),(0,s.jsxs)("div",{children:[m(i)," / ",m(d)]}),(0,s.jsx)("input",{type:"range",min:"0",max:d,value:i,onChange:e=>{let t=parseFloat(e.target.value);o(t),a.current&&(a.current.currentTime=t)},style:{width:"95%"}})]})};function c(e){let[t,n]=(0,l.useState)([]);(0,l.useEffect)(()=>{"add"===e.action&&(console.log("[PlayList_C] add"),e.item&&a(e.item))},[e]);let a=e=>{console.log("newItem:",e),n([...t,e]),console.log("추가 후 list: ",t)};return(0,s.jsx)(s.Fragment,{children:(null==t?void 0:t.map((e,t)=>(0,s.jsx)("li",{children:e.title},t)))||(0,s.jsx)("div",{children:"리스트에 자료 없음"})})}function i(){let[e,t]=(0,l.useState)(""),[n,i]=(0,l.useState)(null),o=e=>{console.log("[Main_C.tsx] onPlayClicked: ",e),t(e)},d=e=>{console.log("아이템 추가",e),i({action:"add",item:e})};return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"top-div",children:[(0,s.jsx)(a,{items:[{channel_title:"CBS 아침뉴스 5분",rss:"https://www.omnycontent.com/d/playlist/53ac8cb6-b299-4f93-8280-af50012ddab0/047943e3-0c15-447b-a4a7-af56000e102d/d63a45b2-e3e3-4136-996c-af56000e103b/podcast.rss",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)(a,{items:[{channel_title:"[SBS]낮 종합뉴스",rss:"http://news.sbs.co.kr/news/VoicePodcast.do?prog_id=1000001001",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)(a,{items:[{channel_title:"[KBS]오늘 세계는",rss:"https://api.kbs.co.kr/mediafactory/v1/podcast/rss/todayworld",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)("br",{}),(0,s.jsx)("hr",{}),(0,s.jsx)("br",{}),(0,s.jsx)(a,{items:[{channel_title:"책플릭스",rss:"https://www.omnycontent.com/d/playlist/53ac8cb6-b299-4f93-8280-af50012ddab0/bf128627-0214-462d-9cec-af5500694ca8/9ee52f0c-fbcc-4bb3-95a3-af5500694cb6/podcast.rss",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)(a,{items:[{channel_title:"라디오문학관",rss:"https://api.kbs.co.kr/mediafactory/v1/podcast/rss/R2016-0124-library",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)("br",{}),(0,s.jsx)("hr",{}),(0,s.jsx)("br",{}),(0,s.jsx)(a,{items:[{channel_title:"슈카월드",rss:"https://anchor.fm/s/ddaceaa8/podcast/rss",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)(a,{items:[{channel_title:"B주류 경제학",rss:"https://anchor.fm/s/f69ee3a4/podcast/rss",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)(a,{items:[{channel_title:"[KBS]성기영의 경제쇼",rss:"https://api.kbs.co.kr/mediafactory/v1/podcast/rss/I0000-2013-kbs-business",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)(a,{items:[{channel_title:"SBS 뉴스 - 경제",rss:"https://news.sbs.co.kr/news/SectionPodcast.do?sectionType=02",count:5}],OnPlayClicked:o,OnAddToListClicked:d})," ",(0,s.jsx)("br",{}),(0,s.jsx)("hr",{}),(0,s.jsx)("br",{}),(0,s.jsx)(a,{items:[{channel_title:"[저탄고지] 낮춰요 탄식, 높여요 지식!",rss:"https://anchor.fm/s/c7dd65cc/podcast/rss",count:2}],OnPlayClicked:o,OnAddToListClicked:d})," "]}),(0,s.jsx)("div",{className:"playlist-div",children:(0,s.jsx)(c,{action:(null==n?void 0:n.action)||"",item:(null==n?void 0:n.item)||null})}),(0,s.jsx)("div",{className:"bottom-div",children:(0,s.jsx)(r,{mp3_url:e,onPlayEndedEvent:()=>{}})})]})}},7401:(e,t,n)=>{Promise.resolve().then(n.bind(n,6636))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7401)),_N_E=e.O()}]);